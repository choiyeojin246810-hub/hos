﻿<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>순천시 병원 현황</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap');
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #f0f4f8;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }
        .card {
            background-color: white;
            border-radius: 1rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 2rem;
        }
        .chart-container {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            padding: 1rem;
        }
        .pie-chart-canvas {
            max-width: 300px;
            max-height: 300px;
            margin-right: 2rem;
        }
        .legend {
            list-style: none;
            padding: 0;
        }
        .legend-item {
            display: flex;
            align-items: center;
            margin-bottom: 0.5rem;
        }
        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 4px;
            margin-right: 0.5rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="text-center mb-12">
            <h1 class="text-4xl font-bold text-gray-800">순천시 병원 현황</h1>
            <p class="text-lg text-gray-600 mt-2">2021년 9월 1일 기준 데이터 시각화</p>
        </header>
        
        <section class="mb-12">
            <div class="card">
                <h2 class="text-2xl font-semibold text-gray-700 mb-6">데이터 분석 및 해석</h2>
                <p class="text-gray-600 mb-8 text-center">
                    순천시 의료기관 데이터 분석 결과, 특정 지역에 의료기관이 집중되어 있는 양상이 나타납니다.
                    특히, 왕지동과 해룡면 지역에 의료기관이 밀집되어 있어 해당 지역 주민들의 의료 접근성이 높을 것으로 보입니다.
                    아래 원형 차트는 의료기관이 가장 많은 상위 5개 지역의 비율을 나타냅니다.
                </p>
                <div class="chart-container" id="analysisChartContainer">
                    <canvas id="locationPieChart" class="pie-chart-canvas"></canvas>
                    <ul id="locationLegend" class="legend"></ul>
                </div>
            </div>
        </section>
        
        <section class="mb-12">
            <div class="card">
                <h2 class="text-2xl font-semibold text-gray-700 mb-6 text-center">국립 의과대학 및 대학병원 필요성</h2>
                <div class="flex flex-col md:flex-row justify-between items-center md:items-start space-y-8 md:space-y-0 md:space-x-8">
                    <div class="flex-1 text-center bg-blue-50 rounded-lg p-6 shadow-md">
                        <span class="text-4xl">🏥</span>
                        <h3 class="text-xl font-semibold text-gray-800 mt-4">문제점</h3>
                        <p class="text-gray-600 mt-2">
                            인구 100만 명 규모의 전남 동부권에 **상급 종합병원 부재**.
                            응급/중증 환자 발생 시 타 지역으로 이동해야 하는 **의료 난민** 문제.
                        </p>
                    </div>
                    
                    <div class="flex items-center justify-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-gray-400 transform rotate-90 md:rotate-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" />
                        </svg>
                    </div>

                    <div class="flex-1 text-center bg-blue-50 rounded-lg p-6 shadow-md">
                        <span class="text-4xl">🎓</span>
                        <h3 class="text-xl font-semibold text-gray-800 mt-4">해결책</h3>
                        <p class="text-gray-600 mt-2">
                            지역 의료 인프라의 핵심 역할을 수행할 수 있는 **국립 의과대학 및 대학병원 설립**.
                        </p>
                    </div>
                    
                    <div class="flex items-center justify-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-gray-400 transform rotate-90 md:rotate-0" fill="none" viewBox="0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" />
                        </svg>
                    </div>

                    <div class="flex-1 text-center bg-blue-50 rounded-lg p-6 shadow-md">
                        <span class="text-4xl">❤️</span>
                        <h3 class="text-xl font-semibold text-gray-800 mt-4">기대효과</h3>
                        <p class="text-gray-600 mt-2">
                            주민 의료 서비스 질 향상 및 의료 인프라 강화.
                            우수 의료 인력 양성 및 지역 정착 유도.
                            의료 산업 및 지역 경제 활성화.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <section class="mb-12">
            <div class="card">
                <h2 class="text-2xl font-semibold text-gray-700 mb-6">SQL 언어 실습 예제</h2>
                <p class="text-gray-600 mb-4">
                    아래는 순천시 의료기관 데이터를 기반으로 SQL 언어를 연습할 수 있는 예제 코드입니다.
                    이 코드를 사용하여 데이터베이스 테이블을 만들고, 데이터를 삽입하고, 다양한 방식으로 정보를 조회해 보세요.
                </p>
                <div class="bg-gray-100 rounded-lg p-6 overflow-x-auto">
<pre><code class="language-sql">-- 1. MedicalInstitutions 테이블 생성
--    의료기관 정보를 저장할 테이블을 정의합니다.
CREATE TABLE MedicalInstitutions (
    id INT PRIMARY KEY,
    category VARCHAR(255),
    name VARCHAR(255),
    address VARCHAR(255),
    phone_number VARCHAR(255)
);

-- 2. 데이터 삽입 예시
--    테이블에 실제 의료기관 데이터를 추가합니다.
INSERT INTO MedicalInstitutions (id, category, name, address, phone_number) VALUES
(1, '한의원', '담뜰한의원', '전라남도 순천시 왕지로 36, 2층 203호 (왕지동)', '061-762-7577'),
(2, '치과의원', '이사랑치과의원', '전라남도 순천시 해룡면 장선배기길 272, 부영6차가동 2층 3,4호', '061-725-2804'),
(3, '한의원', '하얀미한의원', '전라남도 순천시 왕지4길 9-12, 2층 (왕지동)', NULL);

-- 3. 모든 데이터 조회
--    MedicalInstitutions 테이블의 모든 데이터를 보여줍니다.
SELECT *
FROM MedicalInstitutions;

-- 4. 특정 동에 위치한 의료기관 조회
--    '왕지동'에 있는 의료기관만 찾아봅니다.
SELECT *
FROM MedicalInstitutions
WHERE address LIKE '%왕지동%';

-- 5. 업종별 의료기관 수 계산
--    한의원과 치과의원이 각각 몇 개 있는지 수를 세어줍니다.
SELECT category, COUNT(*) AS count
FROM MedicalInstitutions
GROUP BY category;
</code></pre>
                </div>
            </div>
        </section>

        <div class="text-center mt-12 text-sm text-gray-500">
            <p>데이터 출처: 전라남도 순천시_병원(의원, 한의원, 치과의원) 현황_20210901.csv</p>
        </div>
    </div>

    <script>
        // CSV 데이터
        const csvData = `구분,의료기관명,의료기관주소(도로명),의료기관전화번호
한의원,담뜰한의원,"전라남도 순천시 왕지로 36, 2층 203호 (왕지동)",061-762-7577
한의원,하얀미한의원,"전라남도 순천시 왕지4길 9-12, 2층 (왕지동)",
한의원,송인한의원,"전라남도 순천시 중앙로 75, 1층 (저전동)",061-753-2735
한의원,홍대영한의원,"전라남도 순천시 중앙로 146-1, 1층 (매곡동)",061-751-1075
한의원,지리산쌍계한의원,"전라남도 순천시 왕지2길 13-7, 2층 (왕지동)",061-721-0012
한의원,아이누리한의원,"전라남도 순천시 해룡면 매안로 145, 2층 202호",061-723-0275
한의원,산들한의원,"전라남도 순천시 삼산로 101, 2층 203호 (용당동, 주상복합)",061-753-3701
한의원,웃장부부한의원,"전라남도 순천시 중앙로 178, 2층 (남정동)",061-753-2875
치과의원,이사랑치과의원,"전라남도 순천시 해룡면 장선배기길 272, 부영6차가동 2층 3,4호",061-725-2804
치과의원,프롬치과의원,"전라남도 순천시 왕궁길 47, 2층 (조례동)",061-725-2775
치과의원,순천수치과의원,"전라남도 순천시 중앙로 353, 2층 (가곡동)",061-752-6511
치과의원,박석환치과의원,"전라남도 순천시 해룡면 장선배기길 284, 청솔@상가동 201호",061-725-2882
치과의원,라임치과의원,"전라남도 순천시 이수로 321, 4층 (조례동)",061-721-2804
치과의원,스마일치과의원,"전라남도 순천시 해룡면 기적의도서관길 90, 2층 212호 (부영3차아파트)",061-724-2828
치과의원,누가치과의원,전라남도 순천시 중앙로 74 (장천동),061-744-9972
치과의원,우리치과의원,"전라남도 순천시 연향동 1629-1, 3층",061-721-3870`;

        // CSV 데이터 파싱
        function parseCSV(data) {
            const rows = data.trim().split('\n').slice(1);
            const locations = [];
            rows.forEach(row => {
                const parts = row.match(/(".*?"|[^",]+)(?=\s*,|\s*$)/g).map(p => p.replace(/"/g, ''));
                const type = parts[0];
                const name = parts[1];
                const address = parts[2];
                if (type && address) {
                    let dong = '';
                    const match = address.match(/\((.*?동)\)/);
                    if (match) {
                        dong = match[1];
                    } else {
                        const addrParts = address.split(' ');
                        const lastPart = addrParts[addrParts.length - 1].replace(',', '');
                        if (lastPart.endsWith('동') || lastPart.endsWith('면') || lastPart.endsWith('읍')) {
                            dong = lastPart;
                        }
                    }
                    if (dong) {
                        locations.push({ type, name, address, dong });
                    }
                }
            });
            return locations;
        }

        const locations = parseCSV(csvData);

        // 상위 5개 지역 파이 차트 업데이트
        function updateAnalysisChart() {
            const counts = {};
            locations.forEach(loc => {
                counts[loc.dong] = (counts[loc.dong] || 0) + 1;
            });
            
            const sortedLocations = Object.entries(counts).sort(([, a], [, b]) => b - a);
            const top5 = sortedLocations.slice(0, 5);
            const total = top5.reduce((sum, [, count]) => sum + count, 0);

            const colors = ['#4a90e2', '#7ed321', '#f5a623', '#bd10e0', '#50e3c2'];
            const canvas = document.getElementById('locationPieChart');
            const ctx = canvas.getContext('2d');
            const legendEl = document.getElementById('locationLegend');
            
            canvas.width = 300;
            canvas.height = 300;
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            legendEl.innerHTML = '';

            if (total === 0) {
                document.getElementById('analysisChartContainer').innerHTML = `<p class="text-gray-500">데이터를 분석할 수 없습니다.</p>`;
                return;
            }

            let startAngle = 0;
            top5.forEach(([dong, count], index) => {
                const sliceAngle = (count / total) * 2 * Math.PI;
                const color = colors[index % colors.length];

                ctx.beginPath();
                ctx.moveTo(canvas.width / 2, canvas.height / 2);
                ctx.arc(canvas.width / 2, canvas.height / 2, Math.min(canvas.width, canvas.height) / 2, startAngle, startAngle + sliceAngle);
                ctx.closePath();
                ctx.fillStyle = color;
                ctx.fill();

                // 텍스트 추가
                const midAngle = startAngle + sliceAngle / 2;
                const textX = canvas.width / 2 + (Math.cos(midAngle) * (Math.min(canvas.width, canvas.height) / 2) * 0.7);
                const textY = canvas.height / 2 + (Math.sin(midAngle) * (Math.min(canvas.width, canvas.height) / 2) * 0.7);
                
                ctx.fillStyle = 'white';
                ctx.font = '14px Noto Sans KR';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                
                const percentage = ((count / total) * 100).toFixed(1);
                if (percentage > 5) {
                    ctx.fillText(`${percentage}%`, textX, textY);
                }
                
                startAngle += sliceAngle;

                // 범례 추가
                const li = document.createElement('li');
                li.className = 'legend-item';
                li.innerHTML = `
                    <span class="legend-color" style="background-color: ${color};"></span>
                    <span>${dong} (${count}개)</span>
                `;
                legendEl.appendChild(li);
            });
        }
        
        // HTML 문서와 외부 스크립트가 모두 로드된 후에 실행
        window.addEventListener('load', () => {
            updateAnalysisChart();
        });
    </script>
</body>
</html>